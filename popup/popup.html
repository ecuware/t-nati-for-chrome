<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>ténati highlights</title>
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <main class="popup">
      <header class="popup-header">
        <div class="popup-tabs">
          <button id="tabHighlights" class="popup-tab popup-tab--active" data-view="highlights">
            Highlights
          </button>
          <button id="tabSettings" class="popup-tab" data-view="settings">
            Settings
          </button>
        </div>
      </header>

      <!-- Highlights View -->
      <div id="viewHighlights" class="popup-view popup-view--active">
        <div class="popup-view-header">
          <div class="popup-title-row">
            <h1 id="headingTitle" class="popup-title">Highlights</h1>
            <button id="clearButton" class="btn btn--danger btn--icon" type="button" disabled title="Clear all">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/>
              </svg>
            </button>
          </div>
          <p id="popup-url" class="popup-url"></p>
        </div>

        <div class="popup-actions">
          <button id="exportHighlightsButton" class="btn popup-action-btn" type="button" disabled>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/>
            </svg>
            <span id="exportHighlightsLabel">Export Markdown</span>
          </button>
          <button id="exportPageButton" class="btn popup-action-btn" type="button" disabled>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M6 9V2h12v7"/><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/><rect x="6" y="14" width="12" height="8"/>
            </svg>
            <span id="exportPageLabel">Export PDF</span>
          </button>
        </div>

        <div class="popup-content">
          <div id="status" class="popup-status">Loading…</div>
          <ul id="highlightList" class="popup-list" hidden></ul>
        </div>
      </div>

      <!-- Settings View -->
      <div id="viewSettings" class="popup-view">
        <div class="popup-settings">
          <section class="popup-settings-section">
            <h2 class="popup-settings-title">General</h2>
            
            <div class="popup-settings-group">
              <label class="popup-settings-label">
                <span class="popup-settings-label-text">Default Highlight Color</span>
                <select id="defaultColor" class="popup-settings-select">
                  <option value="">None (show panel)</option>
                  <option value="#FFD3B6">Apricot</option>
                  <option value="#FFAAA5">Coral</option>
                  <option value="#C5E1A5">Pistachio</option>
                  <option value="#B2DFDB">Mint</option>
                  <option value="#C7CEEA">Periwinkle</option>
                  <option value="#D7C0F7">Lavender</option>
                </select>
              </label>
            </div>

            <div class="popup-settings-group">
              <label class="popup-settings-label popup-settings-checkbox">
                <input type="checkbox" id="autoHighlight" class="popup-settings-checkbox-input" />
                <span class="popup-settings-label-text">Auto-highlight on selection (skip panel)</span>
              </label>
            </div>
          </section>

          <section class="popup-settings-section">
            <h2 class="popup-settings-title">Storage</h2>
            
            <div class="popup-settings-group">
              <div class="popup-settings-storage">
                <div class="popup-settings-storage-label">Storage Usage</div>
                <div class="popup-settings-storage-bar">
                  <div id="storageBar" class="popup-settings-storage-bar-fill"></div>
                </div>
                <div id="storageText" class="popup-settings-storage-text">Calculating...</div>
              </div>
            </div>

            <div class="popup-settings-group">
              <button id="clearAllData" class="btn btn--danger">
                Clear All Highlights
              </button>
              <p class="popup-settings-help">This will remove all highlights from all pages. This action cannot be undone.</p>
            </div>

            <div class="popup-settings-group">
              <button id="exportData" class="btn">
                Export All Data
              </button>
              <button id="importData" class="btn">
                Import Data
              </button>
              <input type="file" id="importFile" accept=".json" style="display: none;" />
              <p class="popup-settings-help">Backup or restore all your highlights</p>
            </div>
          </section>

          <section class="popup-settings-section">
            <h2 class="popup-settings-title">Appearance</h2>
            
            <div class="popup-settings-group">
              <label class="popup-settings-label">
                <span class="popup-settings-label-text">Theme</span>
                <select id="theme" class="popup-settings-select">
                  <option value="dark" selected>Dark</option>
                  <option value="light">Light</option>
                </select>
              </label>
            </div>

            <div class="popup-settings-group">
              <label class="popup-settings-label">
                <span class="popup-settings-label-text">Animation Speed</span>
                <select id="animationSpeed" class="popup-settings-select">
                  <option value="fast">Fast</option>
                  <option value="normal" selected>Normal</option>
                  <option value="slow">Slow</option>
                  <option value="none">None</option>
                </select>
              </label>
            </div>
          </section>

          <section class="popup-settings-section">
            <h2 class="popup-settings-title">About</h2>
            <div class="popup-settings-group">
              <p class="popup-settings-about">
                <strong>Version:</strong> 0.1.0<br>
                <strong>Chrome Manifest:</strong> v3<br>
                <a href="https://github.com/ecuware/t-nati-for-chrome" target="_blank" class="popup-settings-link">GitHub Repository</a>
              </p>
            </div>
          </section>

          <div class="popup-settings-footer">
            <button id="saveButton" class="btn btn--primary">Save Settings</button>
            <div id="saveStatus" class="popup-settings-status"></div>
          </div>
        </div>
      </div>
    </main>
    <script src="popup.js"></script>
  </body>
</html>
